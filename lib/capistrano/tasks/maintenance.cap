require_relative '../helper_methods'
include Capistrano::HelperMethods

namespace :maintenance do
  desc "メンテナンスモードに入る"
  task :on do
    on roles(:app) do
      execute "mkdir -p #{shared_path}/tmp"
      put_file "lib/maintenance/maintenance.html", "#{shared_path}/tmp/maintenance.html", mode: 0644
    end
  end

  desc "メンテナンスモードを終了する"
  task :off do
    on roles(:app) do
      execute :rm, "#{shared_path}/tmp/maintenance.html"
    end
  end
end
